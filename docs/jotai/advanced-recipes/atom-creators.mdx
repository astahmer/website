---
title: Atom creators
nav: 5.2
---

## `atomWithToggle`

> `atomWithToggle` creates a new atom with a boolean as initial state & a setter function to toggle it.

This avoids the boilerplate of having to setup another atom just to update the state of the first.

```ts
export function atomWithToggle(
  initialValue?: boolean,
  createAtom: (initialValue: boolean) => PrimitiveAtom<boolean> = atom
): WritableAtom<boolean, boolean | undefined> {
  const effectAtom = createAtom(initialValue || false)
  const anAtom: any = atom(initialValue, (get, set, state?: boolean) => {
    const update = state ?? !get(anAtom)
    set(anAtom, update)
    set(effectAtom, update)
  })
  return anAtom
}
```

An optional initial state can be provided as first argument.
A second optional argument can be passed to provide an `atom creator` function, which could be used to enable composable behaviour with other `atom` utils. An example is described below, [`atomWithToggleStored`](#atomWithToggleStored).

The setter function can have an optional arg to force a particular state (if you want to make a setActive function out of it for example).

Here is how it's used.

```ts
import { atomWithToggle } from 'XXX'

// will have an initial value set to true
const isActiveAtom = atomWithToggle(true)
```

And in a component :

```tsx
const Toggle = () => {
  const [isActive, toggle] = useAtom(isActiveAtom)

  return (
    <>
      <button onClick={() => toggle()}>isActive: {isActive ? 'yes' : 'no'}</button>
      <button onClick={() => toggle(true)}>force true</button>
      <button onClick={() => toggle(false)}>force false</button>
    </>
  )
}
```

## `atomWithToggleStored`

> `atomWithToggleStored` does the same as [`atomWithToggle`](#atomWithToggle) but also persist the state anytime it changes in given storage using [`atomWithStorage`](/jotai/api/utils#atomWithStorage).

Here is the source :

```ts
export function atomWithToggleStored(
  key: string,
  initialValue?: boolean,
  storage?: any
): WritableAtom<boolean, boolean | undefined> {
  return atomWithToggle(initialValue, (initial) => atomWithStorage(key!, initial, storage))
}
```

And how it's used :

```ts
import { atomWithToggleStored } from 'XXX'

// will have an initial value set to false & be stored in localStorage under the key "isActive"
const isActiveAtom = atomWithToggleStored('isActive')
```

The usage in a component is also the same as [`atomWithToggle`](#atomWithToggle).
